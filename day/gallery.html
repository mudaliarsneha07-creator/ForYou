<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery üå∏</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Caveat:wght@500;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(1200px circle at 10% 15%, rgba(255,111,174,0.06), transparent 12%),
                  radial-gradient(900px circle at 90% 85%, rgba(138,123,255,0.05), transparent 14%),
                  linear-gradient(135deg, #fff7f8 0%, #f7fbff 50%, #fffbf0 100%);
      min-height: 100vh;
      padding: 40px 20px;
      overflow-x: hidden;
      position: relative;
    }

    /* FLOATING PLANTS & FLOWERS */
    .plant {
      position: fixed;
      font-size: 2.5em;
      opacity: 0.7;
      pointer-events: none;
      animation: float 6s ease-in-out infinite;
      z-index: -1;
    }

    .plant:nth-child(1) { bottom: 10%; left: 5%; animation-delay: 0s; font-size: 3em; }
    .plant:nth-child(2) { top: 20%; right: 8%; animation-delay: 1s; font-size: 2.8em; }
    .plant:nth-child(3) { bottom: 25%; right: 6%; animation-delay: 2s; font-size: 2.2em; }
    .plant:nth-child(4) { top: 40%; left: 4%; animation-delay: 1.5s; font-size: 2.6em; }
    .plant:nth-child(5) { bottom: 45%; right: 12%; animation-delay: 2.5s; font-size: 2.4em; }
    .plant:nth-child(6) { top: 60%; left: 8%; animation-delay: 0.5s; font-size: 2.3em; }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    @keyframes bloom {
      0% { transform: scale(0) rotate(0deg); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: scale(1) rotate(360deg); opacity: 0.7; }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 60px;
      position: relative;
      z-index: 1;
    }

    /* HEADER */
    header {
      text-align: center;
      animation: slideDown 0.8s ease-out;
      margin-bottom: 20px;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      font-size: 3.5em;
      font-weight: 700;
      background: linear-gradient(90deg, #ff6fae 0%, #ffd166 25%, #6ad1c9 50%, #8a7bff 75%, #ff8b5c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.85; }
    }

    .subtitle {
      font-size: 1.2em;
      color: #6b8a8d;
      font-weight: 300;
      margin-bottom: 16px;
    }

    /* GALLERY GRID */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 28px;
      padding: 40px;
      background: linear-gradient(135deg, rgba(255,255,255,0.7), rgba(255,240,245,0.5));
      border-radius: 28px;
      box-shadow: 0 12px 40px rgba(35,100,100,0.06), inset 0 1px 0 rgba(255,255,255,0.9);
      border: 1.5px solid rgba(159,230,220,0.25);
      backdrop-filter: blur(10px);
      animation: fadeInUp 1s ease-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* IMAGE CARDS */
    .image-card {
      position: relative;
      aspect-ratio: 1;
      border-radius: 20px;
      overflow: hidden;
      cursor: pointer;
      animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      opacity: 0;
    }

    .image-card:nth-child(1) { animation-delay: 0.1s; }
    .image-card:nth-child(2) { animation-delay: 0.2s; }
    .image-card:nth-child(3) { animation-delay: 0.3s; }
    .image-card:nth-child(4) { animation-delay: 0.4s; }
    .image-card:nth-child(5) { animation-delay: 0.5s; }
    .image-card:nth-child(6) { animation-delay: 0.6s; }
    .image-card:nth-child(7) { animation-delay: 0.7s; }
    .image-card:nth-child(8) { animation-delay: 0.8s; }

    @keyframes popIn {
      0% { opacity: 0; transform: scale(0.7) rotateX(60deg); }
      100% { opacity: 1; transform: scale(1) rotateX(0); }
    }

    @keyframes popOut {
      0% { opacity: 1; transform: scale(1) rotateX(0); }
      100% { opacity: 0; transform: scale(0.7) rotateX(-60deg); }
    }

    .image-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      filter: brightness(0.95);
    }

    .image-card:hover img {
      transform: scale(1.15) rotateY(8deg);
      filter: brightness(1.1);
    }

    .image-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,111,174,0.3), rgba(138,123,255,0.2));
      opacity: 0;
      transition: opacity 0.4s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(3px);
    }

    .image-card:hover .image-overlay {
      opacity: 1;
    }

    .overlay-icon {
      font-size: 2.5em;
      animation: bounce 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }

    /* DELETE BUTTON */
    .delete-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255, 100, 130, 0.9);
      color: white;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1.2em;
      cursor: pointer;
      opacity: 0;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      box-shadow: 0 4px 12px rgba(255, 100, 130, 0.4);
    }

    .image-card:hover .delete-btn {
      opacity: 1;
    }

    .delete-btn:hover {
      background: rgba(255, 70, 100, 1);
      transform: scale(1.15);
      box-shadow: 0 6px 16px rgba(255, 70, 100, 0.6);
    }

    /* LIGHTBOX */
    .lightbox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-out;
    }

    .lightbox.show {
      display: flex;
    }

    .lightbox-content {
      position: relative;
      max-width: 90vw;
      max-height: 90vh;
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 80px rgba(0, 0, 0, 0.6);
      animation: zoomIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .lightbox-img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .lightbox-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: rgba(255, 70, 100, 0.9);
      color: white;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 28px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 16px rgba(255, 70, 100, 0.5);
      z-index: 2001;
    }

    .lightbox-close:hover {
      background: rgba(255, 40, 70, 1);
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 6px 20px rgba(255, 70, 100, 0.7);
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    /* PLACEHOLDER */
    .placeholder {
      background: linear-gradient(135deg, #ffd1b3 0%, #ffb3d9 50%, #a7f0e3 100%);
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3em;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.05), 0 8px 24px rgba(255,111,174,0.15);
    }

    /* BUTTON */
    .add-btn {
      margin-top: 40px;
      padding: 16px 40px;
      font-size: 1.1em;
      font-weight: 600;
      background: linear-gradient(135deg, #ff6fae 0%, #8a7bff 100%);
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 20px rgba(255,111,174,0.3);
      align-self: center;
    }

    .add-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(255,111,174,0.4);
    }

    .add-btn:active {
      transform: translateY(-1px);
    }

    /* MOBILE */
    @media (max-width: 768px) {
      h1 { font-size: 2.5em; }
      .gallery { grid-template-columns: repeat(2, 1fr); gap: 16px; padding: 24px; }
      .plant { font-size: 2em !important; }
    }

    @media (max-width: 480px) {
      body { padding: 20px 12px; }
      h1 { font-size: 2em; }
      .gallery { grid-template-columns: 1fr; gap: 14px; padding: 16px; }
      .plant { font-size: 1.8em !important; }
    }

     .back-button {
    position: fixed;
    top: 30px;
    left: 30px;
    z-index: 100;
    padding: 14px 24px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(240, 250, 255, 0.8) 100%);
    border: 2px solid rgba(255, 255, 255, 0.6);
    border-radius: 50px;
    font-size: 16px;
    font-weight: 600;
    color: #667eea;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    font-family: "Poppins", sans-serif;
    letter-spacing: 0.5px;
  }

  .back-button:hover {
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 15px 50px rgba(102, 126, 234, 0.3);
    background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%);
    border-color: rgba(240, 147, 251, 0.8);
  }

  .back-button:active {
    transform: translateY(-2px) scale(0.98);
  }
  .back-button {
    position: fixed;
    top: 30px;
    left: 30px;
    z-index: 100;
    padding: 14px 24px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(240, 250, 255, 0.8) 100%);
    border: 2px solid rgba(255, 255, 255, 0.6);
    border-radius: 50px;
    font-size: 16px;
    font-weight: 600;
    color: #667eea;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    font-family: "Poppins", sans-serif;
    letter-spacing: 0.5px;
  }

  .back-button:hover {
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 15px 50px rgba(102, 126, 234, 0.3);
    background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%);
    border-color: rgba(240, 147, 251, 0.8);
  }

  .back-button:active {
    transform: translateY(-2px) scale(0.98);
  }
  </style>
</head>

<body>

<!-- Floating Plants & Flowers -->
<div class="plant">üåø</div>
<div class="plant">üå∏</div>
<div class="plant">üå∫</div>
<div class="plant">üåº</div>
<div class="plant">üçÄ</div>
<div class="plant">üå∑</div>

<div class="container">
<button class="back-button" onclick="goBack()">‚Üê Back</button>
  <!-- HEADER -->
  <header>
    <h1>üå∏ Gallery üå∏</h1>
    <p class="subtitle">A collection of beautiful moments</p>
  </header>

  <!-- GALLERY -->
  <div class="gallery">
    <div class="controls" style="grid-column: 1 / -1; display:flex; justify-content:center;">
      <button class="add-btn" id="addBtn">Ôºã Add / Replace Images</button>
      <input id="fileInput" type="file" accept="image/*" multiple style="display:none" />
    </div>

    <!-- 10 image slots -->
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üì∏</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üé®</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">‚ú®</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üí´</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üåü</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üé≠</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">ü¶ã</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üåà</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üå∑</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
    <div class="image-card">
      <img alt="" />
      <div class="placeholder">üçÄ</div>
      <div class="image-overlay"><div class="overlay-icon">üñºÔ∏è</div></div>
      <button class="delete-btn" title="Delete image">‚úï</button>
    </div>
  </div>

</div>

<script>
  function goBack() {
    window.location.href = 'main.html';
  }
  // Gallery persistence and dynamic slots
  const addBtn = document.getElementById('addBtn');
  const fileInput = document.getElementById('fileInput');
  const gallery = document.querySelector('.gallery');

  function createCard(placeholder = 'üì∏') {
    const card = document.createElement('div');
    card.className = 'image-card';
    const img = document.createElement('img');
    img.alt = '';
    img.style.display = 'none';
    const ph = document.createElement('div');
    ph.className = 'placeholder';
    ph.textContent = placeholder;
    const overlay = document.createElement('div');
    overlay.className = 'image-overlay';
    overlay.innerHTML = '<div class="overlay-icon">üñºÔ∏è</div>';
    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-btn';
    deleteBtn.textContent = '‚úï';
    deleteBtn.title = 'Delete image';
    card.appendChild(img);
    card.appendChild(ph);
    card.appendChild(overlay);
    card.appendChild(deleteBtn);

    // delete button handler
    deleteBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      card.style.animation = 'popOut 0.4s ease-out forwards';
      setTimeout(() => {
        card.remove();
        saveGalleryToStorage();
      }, 400);
    });

    // image click: open lightbox
    img.addEventListener('click', (e) => {
      e.stopPropagation();
      if (img.src) openLightbox(img.src);
    });

    // placeholder/empty card click: open file picker
    ph.addEventListener('click', (e) => {
      e.stopPropagation();
      openFilePicker(card);
    });

    overlay.addEventListener('click', (e) => {
      e.stopPropagation();
      if (img.src) openLightbox(img.src);
      else openFilePicker(card);
    });

    gallery.appendChild(card);
    // ensure animation delays remain sensible
    updateAnimationDelays();
    return card;
  }

  function updateAnimationDelays() {
    Array.from(document.querySelectorAll('.image-card')).forEach((c, i) => {
      c.style.animationDelay = `${0.08 * (i + 1)}s`;
    });
  }

  function openFilePicker(targetCard) {
    const singleInput = document.createElement('input');
    singleInput.type = 'file';
    singleInput.accept = 'image/*';
    singleInput.onchange = (ev) => {
      const f = ev.target.files[0];
      if (!f) return;
      const r = new FileReader();
      r.onload = (e2) => {
        const img = targetCard.querySelector('img');
        const ph = targetCard.querySelector('.placeholder');
        img.src = e2.target.result;
        img.style.display = 'block';
        if (ph) ph.style.display = 'none';
        saveGalleryToStorage();
      };
      r.readAsDataURL(f);
    };
    singleInput.click();
  }

  function openLightbox(src) {
    let lightbox = document.getElementById('lightbox');
    if (!lightbox) {
      lightbox = document.createElement('div');
      lightbox.id = 'lightbox';
      lightbox.className = 'lightbox';
      lightbox.innerHTML = `
        <div class="lightbox-content">
          <button class="lightbox-close">‚úï</button>
          <img class="lightbox-img" src="" />
        </div>
      `;
      document.body.appendChild(lightbox);
      lightbox.querySelector('.lightbox-close').addEventListener('click', closeLightbox);
      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) closeLightbox();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeLightbox();
      });
    }
    lightbox.querySelector('.lightbox-img').src = src;
    lightbox.classList.add('show');
  }

  function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    if (lightbox) lightbox.classList.remove('show');
  }

  function saveGalleryToStorage() {
    try {
      const data = Array.from(document.querySelectorAll('.image-card img')).map(img => img.src || null);
      localStorage.setItem('galleryImages', JSON.stringify(data));
    } catch (err) {
      console.warn('Saving images failed (storage quota?).', err);
      alert('Warning: Unable to save images locally. They may be too large or your browser storage is full.');
    }
  }

  function loadGalleryFromStorage() {
    const raw = localStorage.getItem('galleryImages');
    let arr = [];
    try { arr = raw ? JSON.parse(raw) : []; } catch (e) { arr = []; }

    // Ensure at least 10 slots exist
    const existing = Array.from(document.querySelectorAll('.image-card'));
    const needed = Math.max(10, arr.length);
    for (let i = existing.length; i < needed; i++) createCard(['üì∏','üé®','‚ú®','üí´','üåü','üé≠','ü¶ã','üåà','üå∑','üçÄ'][i % 10]);

    const cards = Array.from(document.querySelectorAll('.image-card'));
    arr.forEach((data, i) => {
      if (!data) return;
      const img = cards[i].querySelector('img');
      const ph = cards[i].querySelector('.placeholder');
      img.src = data;
      img.style.display = 'block';
      if (ph) ph.style.display = 'none';
    });
    updateAnimationDelays();
  }

  // Add button: create a new slot and open file picker
  addBtn.addEventListener('click', () => {
    createCard('üì∏');
    fileInput.click();
  });

  fileInput.addEventListener('change', (e) => {
    const files = Array.from(e.target.files);
    if (files.length === 0) return;
    const cards = Array.from(document.querySelectorAll('.image-card'));
    let cardIndex = 0;
    files.forEach((file) => {
      // find next empty slot
      while (cardIndex < cards.length && cards[cardIndex].querySelector('img').src) cardIndex++;
      if (cardIndex >= cards.length) {
        createCard('üì∏');
        cards.push(...Array.from(document.querySelectorAll('.image-card')));
      }
      const targetCard = cards[cardIndex];
      const reader = new FileReader();
      reader.onload = (ev) => {
        const img = targetCard.querySelector('img');
        const placeholder = targetCard.querySelector('.placeholder');
        img.src = ev.target.result;
        img.style.display = 'block';
        if (placeholder) placeholder.style.display = 'none';
        saveGalleryToStorage();
      };
      reader.readAsDataURL(file);
      cardIndex++;
    });
    // clear input so same files can be selected again
    e.target.value = '';
  });

  // Initialize
  loadGalleryFromStorage();

  // Attach delete handlers to existing cards
  document.querySelectorAll('.image-card').forEach((card) => {
    const img = card.querySelector('img');
    const ph = card.querySelector('.placeholder');
    const overlay = card.querySelector('.image-overlay');
    const deleteBtn = card.querySelector('.delete-btn');
    if (!deleteBtn) {
      const btn = document.createElement('button');
      btn.className = 'delete-btn';
      btn.textContent = '‚úï';
      btn.title = 'Delete image';
      card.appendChild(btn);
    }
    const btn = card.querySelector('.delete-btn');
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      card.style.animation = 'popOut 0.4s ease-out forwards';
      setTimeout(() => {
        card.remove();
        saveGalleryToStorage();
      }, 400);
    });
    // image click: open lightbox
    img.addEventListener('click', (e) => {
      e.stopPropagation();
      if (img.src) openLightbox(img.src);
    });
    // placeholder click: open file picker
    ph.addEventListener('click', (e) => {
      e.stopPropagation();
      openFilePicker(card);
    });
    overlay.addEventListener('click', (e) => {
      e.stopPropagation();
      if (img.src) openLightbox(img.src);
      else openFilePicker(card);
    });
  });
</script>

</body>
</html>
